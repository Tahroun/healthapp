<!DOCTYPE html>
<html>
<head>
	<title>Healthy Lifestyle</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="css/index.css">

	<link rel="stylesheet" type="text/css" href="js/jquery.mobile-1.4.5.css">
    <link rel="stylesheet" href="js/themes/blackheader.min.css" />
    <link rel="stylesheet" href="js/themes/jquery.mobile.icons.min.css" />
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/jquery.mobile-1.4.5.js"></script>
    <link rel="stylesheet" href="leaflet/leaflet.css"/>
    <script src="leaflet/leaflet.js"></script>

    <script type="text/javascript" src="cordova.js"></script>

    <!-- plugin -->

    <style type="text/css">
        .backimg{
            /*background-image: linear-gradient(to top left , white,indigo,black,red);*/
            background-image: url(img/runback.jpg);
            background-repeat: no-repeat;
            background-size:100% 100%;
            margin-top: -6px;
        }
        .zoom {

            padding: 30px;
            transition: transform .2s; 
            margin: 0 auto;
            width: 100%;
            height: 50%;
        }
        .zoom:hover {
            transform: scale(1.5);
       }
        /**.ui-grid-a input{
            height:75%;
            width:75%;
        }*/
        .center-button1{
             height:500;
        }
        img {
            height:100%;
            width:100%;
        }
        div input{
            transition: transform .2s; /* Animation */
            width:100%;
            height:100%;
        }
        figcaption {
            text-align: center;
            color:black;
        }
    </style>
	<script type="text/javascript">
       
        function steps1(){
           window.location = "#stepspage"; 
       }

       function steps2(){
            
           var successHandler = function (pedometerData) {
                // pedometerData.startDate; -> ms since 1970
                // pedometerData.endDate; -> ms since 1970
                //pedometerData.numberOfSteps;
                //document.getElementByid("mysteps").innerHTML = pedometerData.distance;
                document.getElementById("mysteps").innerHTML = pedometerData.distance;

                // pedometerData.floorsAscended;
                // pedometerData.floorsDescended;
            };
           var onError = function() {
                document.getElementById("mysteps").innerHTML = 'error';
               
            };   
            pedometer.startPedometerUpdates(successHandler, onError);
            

            
        }

        function pageone(){

            window.location = "#pageone";
        }
        
        
		function validate(){
			var valid;
			valid=false;
			///////////////// FULL NAME VALIDATION ///////////////////////
    		var regName = /^[a-z][a-z\s]*$/;
    		var name = document.getElementById('fullname').value;
    		if(!regName.test(name)){
        		alert('Please enter your full name.');
        		document.getElementById('fullname').focus();
        		valid=false;
    		}else{
    			valid=true;
    		}
    		/////////////////////////////////////////////////////////////
    		////////////////// AGE VALIDATION ///////////////////////////
    		//starting age:8, ending age:116
    		valid=false;
    		var user_age = document.getElementById('age').value;
    		if (user_age>=8 && user_age <=116){
    			valid=true;
    		}else{
    			alert('Age should be between 8-116.');
    			valid=false;
    			
    		}
    		//////////////////////////////////////////////////////////////
    		///////////////////////HEIGHT VALIDATION//////////////////////
    		valid=false;
    		var user_height= document.getElementById('height_input');
    		if (user_height.value.length==0){
    			alert('Please enter your height.');
    			valid=false;
    		}else{
    			valid=true;
    		}
    		///////////////////////////////////////////////////////////////
    		//////////////////////WEIGHT VALIDATION////////////////////////
    		valid=false;
    		var user_weight= document.getElementById('weight_input');
    		if (user_weight.value.length==0){
    			alert('Please enter your weight.');
    			valid=false;
    		}else{
    			valid=true;
    		}
		 }

		 ///////////////////////////////////////////////////////////////
    	/////////////////////////BMI CALCULATION////////////////////////
          
        function computeBMI() {
            // user inputs
            var height = Number(document.getElementById("height_input").value);
            var heightunits = document.getElementById("height_unit").value;
            var weight = Number(document.getElementById("weight_input").value);
            var weightunits = document.getElementById("weight_unit").value;
        
        
            //Convert all units to metric
            if (heightunits == "inches") {height /= 39.37}; //INCHES TO METRES
            if (heightunits == "cm") {height /= 100}; //CENTIMETRES TO METRES
            if (weightunits == "lb") {weight /= 2.205}; //POUNDS TO KILOGRAMS
        
            //Perform calculation
        
            var BMI = Math.round(weight / Math.pow(height, 2));
        
            //Display result of calculation
            document.getElementById("output").innerText = (BMI);
        
            var output = BMI;

            if (output < 18.5){
                document.getElementById("comment").innerText = "Underweight";
            }
            else if (output >= 18.5 && output <= 25){
                document.getElementById("comment").innerText = "Normal";
            }
            else if (output >= 25 && output <= 30){
                document.getElementById("comment").innerText = "Obese";
            }
            else if (output > 30){
                document.getElementById("comment").innerText = "Overweight";
            }
            // document.getElementById("answer").value = output; 

            }

            // FUNCTION MAPS
            function getloc(){
                var latitude;
                var longitude;
                var mymap;

            if(navigator.geolocation == undefined){
                alert("Geolocation Undefined");
                }else{
                    document.getElementById("avai").innerHTML = "Geolocation Available";
                
                    navigator.geolocation.getCurrentPosition(userLocated,locationError);
                    
                        function userLocated(position){
                            latitude = position.coords.latitude;
                            longitude = position.coords.longitude;
                            var timeOfLocation = position.timestamp;
                            document.getElementById("latid").innerHTML = latitude;
                            document.getElementById("longid").innerHTML = longitude;

                            //markers
                            
                            

                            
                            //end markers

                            mymap = L.map("mapid").setView([latitude,longitude],12);

                            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {maxZoom: 19,attribution: 'Map data &copy;'+'<a href="https://www.openstreetmap.org/">OpenStreetMap</a>'+'contributors,<a href="https://creativecommons.org/licenses'+'/by-sa/2.0/">CC-BY-SA</a>,Imagery Â© <a href="https://'+'www.mapbox.com/">Mapbox</a>',id: 'mapbox.streets',accessToken:'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYyc'+'XBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'}).addTo(mymap);

                             

                             //search control
                             var searchControl = L.esri.Geocoding.geosearch().addTo(mymap);
                             var results = L.layerGroup().addTo(mymap);
                             searchControl.on('results', function(data){
                                results.clearLayers();
                                for (var i = data.results.length - 1; i >= 0; i--) {results.addLayer(L.marker(data.results[i].latlng));
                                }});
                            //end search
                            
                            //start nearby
                                //end nearby
                            //start marker
                            var marker = L.marker([latitude,longitude]).addTo(mymap);
                            marker.bindPopup("You are here").openPopup();

                            var circle = L.circle([latitude,longitude],{color:'red',fillColor:'#f03',fillOpacity:0.5,radius:100}).addTo(mymap);


                            circle.bindPopup("This is your vicinity");
                            //end marker

                            var  fitness4LifeGym = L.marker([-20.301192, 57.518110]).addTo(mymap);
                            var  perfectShape= L.marker([-20.301794, 57.518496]).addTo(mymap);
                            var  war = L.marker([-20.292939, 57.518410]).addTo(mymap);
                            var  combatjujitsu = L.marker([-20.293050, 57.517562]).addTo(mymap);
                            var  tfp = L.marker([-20.303730, 57.523174]).addTo(mymap);
                            var  stPaulTaekwondoClub = L.marker([-20.288328, 57.509141]).addTo(mymap);

                            fitness4LifeGym.bindPopup("Fitness 4 Life Gym").openPopup();
                            perfectShape.bindPopup("Perfect Shape Gym").openPopup();
                            war.bindPopup("warriors Gym").openPopup();
                            combatjujitsu.bindPopup("Combat Jiu-Jitsu Castel").openPopup();
                            tfp.bindPopup("TFP Eau Coulee").openPopup();
                            stPaulTaekwondoClub.bindPopup("St Paul Taek Wondo Club").openPopup();

                            
                    
                    }
            
                function locationError(error){
                    switch(error.code){
                        case error.PERMISSION_DENIED:
                        alert("Permission denied- "+ error.message);
                        break;
                        case error.POSITION_UNAVAILABLE:
                        alert("Position Not available- "+error.message);
                        break;
                        case error.TIMEOUT:
                        alert("Request time out"+ error.message);
                        break;
                    }
                }
                    
        }


    }       


            
        
                    
            // END FUNCTION MAPS

</script>
</head>
<body>
    <!-- HOME PAGE -->
    <div data-role="page" id="homepage">
        <div data-role="header">
            <h3>Health App</h3>
        </div>
        <div role="main">
       
            <div class="ui-grid-solo">
                <div class="ui-block-a"><div class="thumbnail"><img class="backgroundhome" src="img/slogan2.jpg"/></div></div>
            </div>
            <div class="backimg">
            <div class="ui-grid-a" >
                <div class="ui-block-a zoom">
                    <a href="#pageone" data-transition="flip"><img src="img/bmiicon.png" alt="BMI"><figcaption>Calculate BMI</figcaption></a>
                    <!-- <input type="image" data-role="button" data-transition="flip" onclick="pageone()" src="img/bmiicon.png"> -->
                </div>
                <div class="ui-block-b zoom"><a href="#pageone" data-transition="pop"><img src="img/foodicon1.png" alt="Diets"><figcaption>Diet Plans</figcaption></a></div>
            </div>
            <div class="ui-grid-a">
                <div class="ui-block-a zoom"><a href="#pageone" data-transition="fade"><img src="img/workouticon.png" alt="workout"><figcaption>Workouts</figcaption></a></div>
                <div class="ui-block-b zoom"><a href="#locationpage" data-transition="slide"><img src="img/locationicon.png" alt="Location"><figcaption>Location</figcaption></a></div>
            </div>
            <div class="ui-grid-a">
                <div class="ui-block-a zoom"><a href="#pageone" data-transition="flip"><img src="img/helpicon.png" alt="Diets"><figcaption>Help</figcaption></a></div>   
                <div class="ui-block-b zoom"><a href="#stepspage" data-transition="slide"><img src="img/stepsicon.png" alt="Steps Counter"><figcaption>Steps Counter</figcaption></a></div>
            </div>
             
            </div>
        </div>
    
        <div data-role="footer">
            <h1>promoting healthy lifestyle</h1>
        </div>
    </div>
    <!-- END HOMEPAGE -->
    <!-- Steps PAGE -->
    <div data-role="page"  class="backimg" id="stepspage">
        <div data-role="header">
            <h3>Get Moving</h3>
        </div>
        <div role="main">
            
            <div class="ui-grid-a" >
                <div class="ui-block-a ">
                    <button onclick="steps2()">Start</button>
                    <!-- <input type="image" data-role="button" data-transition="flip" onclick="pageone()" src="img/bmiicon.png"> -->
                </div>
                <div class="ui-block-b "><p id="mysteps"></p></div>
            </div>

        </div>
        
        
        <div data-role="footer">
            <h1>Steps Counter Plugin</h1>
        </div>  
    </div>
    <!-- END Steps page -->
    <!-- BMI FORM -->
	<div data-role="page" id="pageone">
		
		  <div data-role="header">
		      <h1>Healthy Lifestyle</h1>
			
		  </div>
			<div role="main" class="ui-content"> 
			<form>
				<label for="fullname">Enter full name:</label>
 				<input type="text" required="true" name="fullname" id="fullname"><br>
 				

                <label for="age">Enter age:</label>
 				<input type="number" name="age" id="age"><br>


 				<label for="gender">Select gender:</label>
 				<select id="gender" name="gender">
					<option value="M">Male</option>
					<option value="F">Female</option>
				</select>
           
 			    Enter your height: 
                
 					<input type="number" id="height_input"/>
                        
                        
					<select type="multiple" id="height_unit">
                		<option value="cm" selected="selected">centimetres</option>
                		<option value="inches">inches</option>
            		</select>
 			
    
 				
 					<label for="weight_input">Enter your weight: </label>
                    <input type="number" id="weight_input" required />
            		<select type="multiple" id="weight_unit">
                		<option value="kg" selected="selected">kilograms</option>
                		<option value="lb">pounds</option>
            		</select>

 				<input type="button" onclick="validate();" value="Submit">
        		<input type="submit" value="computeBMI" onclick="computeBMI();">
                <input type="submit" method="POST" value="Submit post"></input>
        		<h1>Your BMI is: <span id="output">?</span></h1>
        
        		<h2>This means you are: <span id="comment"> ?</span> </h2> 
  				
  			</form>
            </div>
            <div data-role="footer">
                <h2>HYBRID APPLICATION</h2>
            </div>
		</div>

        <!-- END BMI -->
        <!-- Workouts PAGE -->
        <!-- END workouts page -->
        <!-- MAPS PAGE -->
        <div data-role="page"  class="backimg" id="locationpage">
        <div data-role="header">
            <h3>Get Moving</h3>
        </div>
        <div role="main">
        
            <div id="mapid" style="width:100%;height:550px;">
                
            </div>

            <button id="btnLocation" style="margin-top: 10px;" onclick="getloc()">My location</button> 
            <br>
            <p id="avai" style="color:green;"></p>

            <br>
            Latitude:<div id="latid"></div> Longitude:<div id="longid"></div>
        </div>
        
        <div data-role="footer">
            <h1>Leaflet API</h1>
        </div>
    </div>
        <!-- END MAPS PAGE -->
			<!--<div data-role="navbar">
				<ul>
					<li><a href="#" class="ui-btn-active ui-state-persist"data-icon="home">Home</a></li>
					<li><a href="#pagetwo" data-icon="grid">Calculator</a></li>
					<li><a href="#pagethree"  data-icon="info">Help</a></li>
				</ul>
			</div>
			-->


	
</body>
</html>
